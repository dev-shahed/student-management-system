# ------------------------------
# Database Configuration (Neon)
# ------------------------------
spring.datasource.url=${NEON_DB_URL:jdbc:postgresql://ep-wild-glitter-a5dkioil-pooler.us-east-2.aws.neon.tech/productservice?sslmode=require}
spring.datasource.username=${NEON_DB_USERNAME:postgres}
spring.datasource.password=${NEON_DB_PASSWORD:defaultpassword}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration optimized for Neon DB
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# ------------------------------
# Connection Pool (HikariCP)
# ------------------------------
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=2
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=900000
spring.datasource.hikari.connection-timeout=20000

# ------------------------------
# Server Configuration
# ------------------------------
# Bind to all interfaces so external platforms can reach the app
server.address=0.0.0.0
# Use PORT environment variable set by Render
server.port=${PORT:8080}
server.error.include-message=always
server.error.include-binding-errors=always

# ------------------------------
# Spring Boot & Logging
# ------------------------------
spring.main.banner-mode=off
spring.jpa.open-in-view=true
logging.level.root=warn

# Debug Spring Security (optional)
logging.level.org.springframework.security=DEBUG
logging.level.org.springframework.security.web.access=DEBUG
logging.level.org.springframework.security.authentication=DEBUG

# ------------------------------
# Spring Security
# ------------------------------
spring.security.user.name=${SPRING_SECURITY_USERNAME:admin}
spring.security.user.password=${SPRING_SECURITY_PASSWORD:admin123}
spring.security.user.roles=TEACHER,STUDENT,PRINCIPLE

# ------------------------------
# JWT Configuration
# ------------------------------
app.jwt-secret=${JWT_SECRET:default-jwt-secret-change-this-in-production}
app.jwt-token-expiration-time=${JWT_EXPIRATION_TIME:86400000}

# ------------------------------
# MVC Path Matching
# ------------------------------
spring.mvc.pathmatch.matching-strategy=ANT_PATH_MATCHER
